[all:vars]
ansible_user=ubuntu
ansible_ssh_private_key_file=~/.ssh/ai-box-key.pem
ansible_ssh_common_args='-o StrictHostKeyChecking=no'

[masters]
master-1 ansible_host=10.0.1.10 kubernetes_role=master
master-2 ansible_host=10.0.1.11 kubernetes_role=master
master-3 ansible_host=10.0.1.12 kubernetes_role=master

[workers]
worker-1 ansible_host=10.0.2.10 kubernetes_role=worker
worker-2 ansible_host=10.0.2.11 kubernetes_role=worker
worker-3 ansible_host=10.0.2.12 kubernetes_role=worker
worker-4 ansible_host=10.0.2.13 kubernetes_role=worker

[gpu_workers]
gpu-worker-1 ansible_host=10.0.2.20 kubernetes_role=worker gpu_enabled=true
gpu-worker-2 ansible_host=10.0.2.21 kubernetes_role=worker gpu_enabled=true

[etcd]
master-1
master-2
master-3

[k3s_cluster:children]
masters
workers
gpu_workers

[k3s_cluster:vars]
# K3s configuration
k3s_version=v1.28.2+k3s1
k3s_token=ai-box-cluster-token-2024
k3s_server_location=/var/lib/rancher/k3s
k3s_server_manifests_templates_dir="{{ k3s_server_location }}/server/manifests-templates"
k3s_server_manifests_dir="{{ k3s_server_location }}/server/manifests"

# System configuration
systemd_dir=/etc/systemd/system
master_ip="{{ hostvars[groups['masters'][0]]['ansible_host'] | default(groups['masters'][0]) }}"
extra_server_args=""
extra_agent_args=""

# Network configuration
k3s_flannel_backend=vxlan
k3s_cluster_cidr=10.42.0.0/16
k3s_service_cidr=10.43.0.0/16
k3s_cluster_dns=10.43.0.10

# Security
k3s_use_experimental=false
k3s_use_docker=false
k3s_no_deploy_traefik=true
k3s_no_deploy_servicelb=true

# Storage
k3s_server_data_dir=/var/lib/rancher/k3s
